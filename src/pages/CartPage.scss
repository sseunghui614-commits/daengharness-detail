@use "../assets/scss/variables";
@use "../assets/scss/mixins" as *;

#cart-page {
  width: 100%;
  min-height: 100vh;
  background: var(--white);

  // 데스크탑 기준 좌우 여백
  padding: 0 10rem 6rem;

  @include mobile {
    padding: 0 1.25rem 5rem;
  }

  // ====== 상단바 ======
  .cart-top {
    width: 100%;
    max-width: 1200px;
    margin: 0 auto 2rem;

    // 스크롤 전 기본 배치(넓게)
    @include flex-layout(row, space-between, center, 1.5rem);
    padding: 4.5rem 0 1.5rem;

    // 타이틀(기본 상태에서는 크게)
    .cart-h1 {
      flex: 1;
      text-align: center;
      font-size: 64px;
      font-weight: 900;
      color: var(--color-deep-blue);
    }

    .user-info {
      width: 120px;
      font-size: 22px;
      font-weight: 700;
      color: var(--black);
    }

    .right {
      width: 220px;
      @include flex-layout(row, flex-end, center, 0.75rem);

      button {
        border: none;
        outline: none;
        cursor: pointer;

        background-color: var(--soft-beige);
        border-radius: 12px;
        padding: 0.6rem 1.2rem;
        font-size: 16px;
        font-weight: 700;
        color: var(--black);

        &:hover {
          background-color: var(--muted-yellow);
        }
      }
    }

    // ✅ 스크롤 후 fixed 모드
    &.is-fixed {
      position: fixed;
      left: 0;
      top: 0;
      z-index: 999;

      max-width: none;
      margin: 0;
      padding: 1rem 10rem; // 페이지 좌우여백이랑 맞추기

      background: rgba(255, 255, 255, 0.7);
      backdrop-filter: blur(10px);
      box-shadow: 0 6px 18px rgba(0, 0, 0, 0.12);

      // ✅ 스크롤 후엔 타이틀 숨김(비회원 + 버튼만 한 줄)
      .cart-h1 {
        display: none;
      }

      // 좌우가 딱 한 줄 정렬되게
      .user-info {
        width: auto;
      }
      .right {
        width: auto;
      }

      @include mobile {
        padding: 0.9rem 1.25rem;
      }
    }

    @include mobile {
      padding: 2.5rem 0 1.2rem;

      .cart-h1 {
        font-size: 40px;
      }

      .user-info {
        width: auto;
        font-size: 16px;
      }

      .right {
        width: auto;

        button {
          padding: 0.55rem 1rem;
          font-size: 14px;
        }
      }
    }
  }

  // ✅ fixed 상단바 높이만큼 본문 밀어내는 스페이서
  .cart-top-spacer {
    display: none;
  }

  &.is-fixed {
    .cart-top-spacer {
      display: block;
      height: 72px; // fixed 상단바 대충 높이. 필요하면 80px로 조절
      margin-bottom: 1rem;

      @include mobile {
        height: 64px;
      }
    }
  }

  // ====== 리스트 ======
  .cart-wrap {
    max-width: 1200px;
    margin: 0 auto;
    @include flex-layout(column, flex-start, stretch, 2rem);
  }

  // ====== 비었을 때 ======
  .cart-empty {
    max-width: 1200px;
    margin: 0 auto;
    padding: 5rem 0;
    text-align: center;
    color: rgba(0, 0, 0, 0.5);
    font-weight: 600;
  }

  // ====== CartItem 카드 ======
  .cart-item {
    position: relative;
    padding-top: 2rem;
    @include flex-layout(row, flex-start, stretch, 1.25rem);

    .cart-check {
      width: 44px;
      flex: 0 0 44px;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      padding-top: 1.2rem;

      input[type="checkbox"] {
        width: 22px;
        height: 22px;
        cursor: pointer;
        accent-color: var(--color-deep-blue);
      }

      @include mobile {
        width: 34px;
        flex-basis: 34px;

        input[type="checkbox"] {
          width: 20px;
          height: 20px;
        }
      }
    }

    &::before {
      content: "";
      position: absolute;
      left: 44px;
      right: 0;
      top: 0;
      bottom: 0;
      background: var(--white);
      border-radius: 16px;
      box-shadow: 0 10px 28px rgba(0, 0, 0, 0.16);
      z-index: 0;

      @include mobile {
        left: 34px;
        border-radius: 14px;
      }
    }

    > * {
      position: relative;
      z-index: 1;
    }

    .cart-img {
      width: 260px;
      height: 160px;
      border-radius:16px;
      overflow: hidden;
      display: flex;
      justify-content: center;
      align-items: center;

      img {
        width: 100%;
        height: 100%;
        object-fit:cover;
        display: block;
      }

      .img-empty {
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.06);
      }

      @include mobile {
        width: 120px;
        height: 120px;
        border-radius: 14px;
      }
    }

    .cart-info {
      flex:1;
      padding: 1.4rem 1.6rem;
      border-radius: 0 16px 16px 0;

      @include mobile {
        padding: 1rem;
        border-radius: 0 14px 14px 0;
      }

      .cart-prod-name {
        font-size: 24px;
        font-weight: 800;
        color: var(--black);
        text-align: right;
        margin-bottom: 0.75rem;

        @include mobile {
          font-size: 16px;
          margin-bottom: 0.6rem;
        }
      }

      .cart-options {
        @include flex-layout(column, flex-start, stretch, 0.55rem);
        margin-bottom: 0.9rem;
      }

      .cart-size-select,
      .cart-color-select {
        width: 100%;
        height: 44px;
        padding: 0 44px 0 14px;
        border: 1px solid #e6e6e6;
        border-radius: 6px;
        background: #fff;
        font-size: 16px;

        &:focus {
          outline: none;
          border-color: rgba(15, 78, 119, 0.35);
          box-shadow: 0 0 0 3px rgba(15, 78, 119, 0.12);
        }
      }

      .cart-bottom-row {
        @include flex-layout(row, space-between, center, 1rem);

        @include mobile {
          @include flex-layout(column, flex-start, flex-start, 0.6rem);
        }

        .cart-sale-text {
          font-size: 16px;
          color: rgba(0, 0, 0, 0.45);
          margin: 0;
          white-space: nowrap;
        }

        .cart-qty {
          @include flex-layout(row, center, center, 0.6rem);

          button {
            width: 28px;
            height: 28px;
            // border: 1px solid #e6e6e6;
            border: none;
            background: var(--soft-beige);
            border-radius: 6px;
            cursor: pointer;
            font-weight: 800;

            &:hover {
              background: var(--muted-yellow);
            }
          }

          span {
            min-width: 22px;
            text-align: center;
            font-weight: 700;
          }
        }

        .cart-price {
          margin: 0;
          font-size: 20px;
          font-weight: 900;
          color: var(--black);
          white-space: nowrap;
        }
      }
    }
  }

  // ====== 하단 합계/주문 (고정 X / 모바일도 위아래) ======
  .cart-bottom {
    max-width: 1200px;
    margin: 3rem auto 0;
    padding: 2.2rem 0 0;
    border-top: 1px solid rgba(0, 0, 0, 0.1);

    // ✅ 항상 세로(총액 위 / 주문하기 아래)로 간다
    display: block;

    .cart-total {
      @include flex-layout(row, space-between, baseline, 1rem);
      font-size: 32px;
      font-weight: 900;
      color: var(--black);

      .cart-total-label {
        font-weight: 900;
      }
      .cart-total-price {
        font-weight: 900;
      }

      @include mobile {
        font-size: 22px;
      }
    }

    .cart-order {
      // 피그마 느낌: 가운데 큰 버튼
      display: block;
      width: 100%;
      max-width: 720px;
      margin: 2rem auto 0;

      border: none;
      cursor: pointer;
      border-radius: 0;
      padding: 1.6rem 0;
      font-size: 40px;
      font-weight: 900;

      background: var(--light-yellow);
      color: var(--black);

      &:hover {
        background: var(--hover-soft-yellow);
      }

      @include mobile {
        max-width: none;
        font-size: 26px;
        padding: 1.2rem 0;
      }
    }
  }

  // ====== 주문 완료 팝업 ======
  .cart-popup {
    position: fixed;
    left: 50%;
    bottom: 2.2rem;
    transform: translateX(-50%);
    background: rgba(0, 0, 0, 0.85);
    color: var(--white);
    padding: 0.9rem 1.2rem;
    border-radius: 12px;
    font-weight: 700;
    z-index: 999;
  }
}
